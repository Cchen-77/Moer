\hypertarget{_image_texture_8h_source}{}\doxysection{Image\+Texture.\+h}
\label{_image_texture_8h_source}\index{/mnt/renderer/Zero/src/FunctionLayer/Texture/ImageTexture.h@{/mnt/renderer/Zero/src/FunctionLayer/Texture/ImageTexture.h}}
\mbox{\hyperlink{_image_texture_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_color_8h}{CoreLayer/ColorSpace/Color.h}}"{}}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_image_8h}{ResourceLayer/File/Image.h}}"{}}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_intersection_8h}{FunctionLayer/Intersection.h}}"{}}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_texture_8h}{Texture.h}}"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_texture_mapping_8h}{TextureMapping.h}}"{}}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{keyword}{enum class} WrapMode}
\DoxyCodeLine{22 \{}
\DoxyCodeLine{23     \textcolor{comment}{// todo}}
\DoxyCodeLine{24 \};}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{27 \textcolor{keyword}{class }PrefilteredImage}
\DoxyCodeLine{28 \{}
\DoxyCodeLine{29 \textcolor{keyword}{protected}:}
\DoxyCodeLine{30     WrapMode wrapMode;}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{keyword}{public}:}
\DoxyCodeLine{33     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} setWrapMode(\textcolor{keyword}{enum} WrapMode \_wrapMode);}
\DoxyCodeLine{34     \textcolor{keyword}{virtual} WrapMode getWrapMode();}
\DoxyCodeLine{35     \textcolor{comment}{// todo: other common parameters}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     \textcolor{keyword}{virtual} T eval(\textcolor{keyword}{const} TextureCoord2D \&coord) = 0;}
\DoxyCodeLine{38     \textcolor{keyword}{virtual} T texel(\textcolor{keyword}{const} \mbox{\hyperlink{struct_t_point2}{Point2i}} \&coord) = 0;}
\DoxyCodeLine{39     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} loadImage(\textcolor{keyword}{const} std::string \&filename) = 0;}
\DoxyCodeLine{40 \};}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{43 \textcolor{keyword}{class }DirectImage : \textcolor{keyword}{public} PrefilteredImage<T>}
\DoxyCodeLine{44 \{}
\DoxyCodeLine{45 \textcolor{keyword}{protected}:}
\DoxyCodeLine{46     std::shared\_ptr<Image> image;}
\DoxyCodeLine{47 }
\DoxyCodeLine{48 \textcolor{keyword}{public}:}
\DoxyCodeLine{49     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} loadImage(\textcolor{keyword}{const} std::string \&filename);}
\DoxyCodeLine{50     \textcolor{keyword}{virtual} T eval(\textcolor{keyword}{const} TextureCoord2D \&coord);}
\DoxyCodeLine{51     \textcolor{keyword}{virtual} T texel(\textcolor{keyword}{const} \mbox{\hyperlink{struct_t_point2}{Point2i}} \&coord);}
\DoxyCodeLine{52 \};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{55 \textcolor{keyword}{class }LinearMIPMap : \textcolor{keyword}{public} PrefilteredImage<T>}
\DoxyCodeLine{56 \{}
\DoxyCodeLine{57 \textcolor{keyword}{protected}:}
\DoxyCodeLine{58     std::shared\_ptr<Image> image;}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{keyword}{public}:}
\DoxyCodeLine{61     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} loadImage(\textcolor{keyword}{const} std::string \&filename);}
\DoxyCodeLine{62     \textcolor{keyword}{virtual} T eval(\textcolor{keyword}{const} TextureCoord2D \&coord);}
\DoxyCodeLine{63     \textcolor{keyword}{virtual} T texel(\textcolor{keyword}{const} \mbox{\hyperlink{struct_t_point2}{Point2i}} \&coord);}
\DoxyCodeLine{64 \};}
\DoxyCodeLine{65 }
\DoxyCodeLine{68 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Treturn, \textcolor{keyword}{typename} Tmemory>}
\DoxyCodeLine{69 \textcolor{keyword}{class }\mbox{\hyperlink{class_image_texture}{ImageTexture}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_std_texture}{StdTexture}}<Treturn, TextureCoord2D>}
\DoxyCodeLine{70 \{}
\DoxyCodeLine{71 \textcolor{keyword}{protected}:}
\DoxyCodeLine{72     std::shared\_ptr<PrefilteredImage<Tmemory>> imageSampler;}
\DoxyCodeLine{73 }
\DoxyCodeLine{74 \textcolor{keyword}{public}:}
\DoxyCodeLine{75     \mbox{\hyperlink{class_image_texture}{ImageTexture}}(\textcolor{keyword}{const} std::string \&filename,}
\DoxyCodeLine{76                  std::shared\_ptr<TextureMapping2D> mapping = std::make\_shared<UVTextureMapping2D>()); \textcolor{comment}{// using default sampler}}
\DoxyCodeLine{77     \mbox{\hyperlink{class_image_texture}{ImageTexture}}(\textcolor{keyword}{const} std::string \&filename,}
\DoxyCodeLine{78                  std::shared\_ptr<PrefilteredImage<Tmemory>> imageSampler,}
\DoxyCodeLine{79                  std::shared\_ptr<TextureMapping2D> mapping = std::make\_shared<UVTextureMapping2D>());}
\DoxyCodeLine{80     \textcolor{keyword}{virtual} Treturn \mbox{\hyperlink{class_image_texture_a5cfb49f9683d6bcd63e5a666aa8c89ec}{eval}}(\textcolor{keyword}{const} TextureCoord2D \&coord) \textcolor{keyword}{const override};}
\DoxyCodeLine{81 \};}
\DoxyCodeLine{82 }
\DoxyCodeLine{83 \textcolor{comment}{// * Example: Creating a Image-\/based Color Texture using UV coordinates from mesh}}
\DoxyCodeLine{84 \textcolor{comment}{// * >  ImageTexture<RGB3>("{}1.jpg"{});}}
\DoxyCodeLine{85 \textcolor{comment}{// * >  ImageTexture<RGB3>("{}1.jpg"{}, std::make\_shared<DirectSampler>());}}
\DoxyCodeLine{86 \textcolor{comment}{// * >  ImageTexture<RGB3>("{}1.jpg"{}, std::make\_shared<UVTextureMapping2D>());}}
\DoxyCodeLine{87 \textcolor{comment}{// * >  ImageTexture<RGB3>("{}1.jpg"{}, std::make\_shared<DirectSampler>(), std::make\_shared<UVTextureMapping2D>());}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89 \textcolor{comment}{// * Example: Create a Image-\/based Normal Map (wip)}}
\DoxyCodeLine{90 \textcolor{comment}{// * since normal cannot be directly interpolated, you need to provide T with some compact NDF type}}
\DoxyCodeLine{91 \textcolor{comment}{// * The NDF must provide convertor from RGB3 and some accessors for shadings (depends on implementation of material)}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{94 \textcolor{keywordtype}{void} PrefilteredImage<T>::setWrapMode(\textcolor{keyword}{enum} WrapMode \_wrapMode)}
\DoxyCodeLine{95 \{}
\DoxyCodeLine{96     wrapMode = \_wrapMode;}
\DoxyCodeLine{97 \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{100 WrapMode PrefilteredImage<T>::getWrapMode()}
\DoxyCodeLine{101 \{}
\DoxyCodeLine{102     \textcolor{keywordflow}{return} wrapMode;}
\DoxyCodeLine{103 \}}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{106 \textcolor{keywordtype}{void} DirectImage<T>::loadImage(\textcolor{keyword}{const} std::string \&filename)}
\DoxyCodeLine{107 \{}
\DoxyCodeLine{108     image = std::make\_shared<Image>(filename);}
\DoxyCodeLine{109 \}}
\DoxyCodeLine{110 }
\DoxyCodeLine{111 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{112 T DirectImage<T>::texel(\textcolor{keyword}{const} \mbox{\hyperlink{struct_t_point2}{Point2i}} \&coord)}
\DoxyCodeLine{113 \{}
\DoxyCodeLine{114     \textcolor{comment}{// todo}}
\DoxyCodeLine{115     \textcolor{keywordflow}{return} 0.0;}
\DoxyCodeLine{116 \}}
\DoxyCodeLine{117 }
\DoxyCodeLine{118 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Treturn, \textcolor{keyword}{typename} Tmemory>}
\DoxyCodeLine{119 \mbox{\hyperlink{class_image_texture}{ImageTexture<Treturn, Tmemory>::ImageTexture}}(\textcolor{keyword}{const} std::string \&filename,}
\DoxyCodeLine{120                                              std::shared\_ptr<TextureMapping2D> mapping) : \mbox{\hyperlink{class_std_texture}{StdTexture}}<Treturn, TextureCoord2D>(mapping)}
\DoxyCodeLine{121 \{}
\DoxyCodeLine{122     imageSampler = std::make\_shared<DirectImage<Tmemory>>();}
\DoxyCodeLine{123     imageSampler-\/>loadImage(filename);}
\DoxyCodeLine{124 \}}
\DoxyCodeLine{125 }
\DoxyCodeLine{126 }
\DoxyCodeLine{127 }
\DoxyCodeLine{128 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Treturn, \textcolor{keyword}{typename} Tmemory>}
\DoxyCodeLine{129 \mbox{\hyperlink{class_image_texture}{ImageTexture<Treturn, Tmemory>::ImageTexture}}(\textcolor{keyword}{const} std::string \&filename,}
\DoxyCodeLine{130                                              std::shared\_ptr<PrefilteredImage<Tmemory>> imageSampler,}
\DoxyCodeLine{131                                              std::shared\_ptr<TextureMapping2D> mapping) : imageSampler(imageSampler), \mbox{\hyperlink{class_std_texture}{StdTexture}}<Treturn, TextureCoord2D>(mapping)}
\DoxyCodeLine{132 \{}
\DoxyCodeLine{133     this-\/>imageSampler-\/>loadImage(filename);}
\DoxyCodeLine{134 \}}

\end{DoxyCode}
