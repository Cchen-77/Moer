\hypertarget{_texture_8h_source}{}\doxysection{Texture.\+h}
\label{_texture_8h_source}\index{Texture.h@{Texture.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}FunctionLayer/Intersection.h"{}}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}CoreLayer/Geometry/Geometry.h"{}}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{comment}{// Tvalue can be float or any specturm type}}
\DoxyCodeLine{20 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue>}
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{class_texture}{Texture}}}
\DoxyCodeLine{25 \{}
\DoxyCodeLine{26 \textcolor{keyword}{public}:}
\DoxyCodeLine{27     \textcolor{keyword}{virtual} Tvalue eval(\textcolor{keyword}{const} Intersection \&intersection) \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{28 \};}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{comment}{// @brief Struct for texture coord C and dC/dx, dC/dy.}}
\DoxyCodeLine{32 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tpos, \textcolor{keyword}{typename} Tvec>}
\DoxyCodeLine{33 \textcolor{keyword}{struct }TextureCoord}
\DoxyCodeLine{34 \{}
\DoxyCodeLine{35     Tpos coord;}
\DoxyCodeLine{36     Tvec dcdx;}
\DoxyCodeLine{37     Tvec dcdy;}
\DoxyCodeLine{38 \};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{keyword}{typedef} TextureCoord<Point2d, Vec2d> TextureCoord2D;}
\DoxyCodeLine{41 \textcolor{keyword}{typedef} TextureCoord<Point3d, Vec3d> TextureCoord3D;}
\DoxyCodeLine{42 }
\DoxyCodeLine{44 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tcoord>}
\DoxyCodeLine{45 \textcolor{keyword}{class }\mbox{\hyperlink{class_texture_mapping}{TextureMapping}}}
\DoxyCodeLine{46 \{}
\DoxyCodeLine{47 \textcolor{keyword}{protected}:}
\DoxyCodeLine{48 \textcolor{keyword}{public}:}
\DoxyCodeLine{49     \textcolor{keyword}{virtual} Tcoord mapping(\textcolor{keyword}{const} Intersection \&intersection) \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{50 \};}
\DoxyCodeLine{51 }
\DoxyCodeLine{52 \textcolor{keyword}{typedef} \mbox{\hyperlink{class_texture_mapping}{TextureMapping<TextureCoord2D>}} \mbox{\hyperlink{class_texture_mapping}{TextureMapping2D}};}
\DoxyCodeLine{53 \textcolor{keyword}{typedef} \mbox{\hyperlink{class_texture_mapping}{TextureMapping<TextureCoord3D>}} \mbox{\hyperlink{class_texture_mapping}{TextureMapping3D}};}
\DoxyCodeLine{54 }
\DoxyCodeLine{55 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue>}
\DoxyCodeLine{56 \textcolor{keyword}{class }ConstantTexture : \textcolor{keyword}{public} \mbox{\hyperlink{class_texture}{Texture}}<Tvalue>}
\DoxyCodeLine{57 \{}
\DoxyCodeLine{58 \textcolor{keyword}{protected}:}
\DoxyCodeLine{59     Tvalue value;}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \textcolor{keyword}{public}:}
\DoxyCodeLine{62     ConstantTexture(\textcolor{keyword}{const} Tvalue \&value);}
\DoxyCodeLine{63     \textcolor{keyword}{virtual} Tvalue eval(\textcolor{keyword}{const} Intersection \&intersection) \textcolor{keyword}{const};}
\DoxyCodeLine{64 \};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue>}
\DoxyCodeLine{67 \textcolor{keyword}{class }MixTexture : \textcolor{keyword}{public} \mbox{\hyperlink{class_texture}{Texture}}<Tvalue>}
\DoxyCodeLine{68 \{}
\DoxyCodeLine{69 \textcolor{keyword}{protected}:}
\DoxyCodeLine{70     std::shared\_ptr<Texture<Tvalue>> srcA;}
\DoxyCodeLine{71     std::shared\_ptr<Texture<Tvalue>> srcB;}
\DoxyCodeLine{72     std::shared\_ptr<Texture<double>> factor;}
\DoxyCodeLine{73 }
\DoxyCodeLine{74 \textcolor{keyword}{public}:}
\DoxyCodeLine{75     MixTexture(std::shared\_ptr<\mbox{\hyperlink{class_texture}{Texture<Tvalue>}}> srcA,}
\DoxyCodeLine{76                std::shared\_ptr<\mbox{\hyperlink{class_texture}{Texture<Tvalue>}}> srcB,}
\DoxyCodeLine{77                std::shared\_ptr<\mbox{\hyperlink{class_texture}{Texture<double>}}> factor);}
\DoxyCodeLine{78 }
\DoxyCodeLine{79     \textcolor{keyword}{virtual} Tvalue eval(\textcolor{keyword}{const} Intersection \&intersection) \textcolor{keyword}{const};}
\DoxyCodeLine{80 \};}
\DoxyCodeLine{81 }
\DoxyCodeLine{84 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue, \textcolor{keyword}{typename} Tcoord>}
\DoxyCodeLine{85 \textcolor{keyword}{class }\mbox{\hyperlink{class_std_texture}{StdTexture}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_texture}{Texture}}<Tvalue>}
\DoxyCodeLine{86 \{}
\DoxyCodeLine{87 \textcolor{keyword}{protected}:}
\DoxyCodeLine{88     std::shared\_ptr<TextureMapping<Tcoord>> mapping;}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{keyword}{public}:}
\DoxyCodeLine{91     \mbox{\hyperlink{class_std_texture}{StdTexture}}();}
\DoxyCodeLine{92     \mbox{\hyperlink{class_std_texture}{StdTexture}}(std::shared\_ptr<\mbox{\hyperlink{class_texture_mapping}{TextureMapping<Tcoord>}}> mapping);}
\DoxyCodeLine{93 }
\DoxyCodeLine{95     \textcolor{keyword}{virtual} Tvalue \mbox{\hyperlink{class_std_texture_afe2060ef6aa48e73021144b53c0c5e08}{eval}}(\textcolor{keyword}{const} Intersection \&intersection) \textcolor{keyword}{const} \textcolor{keyword}{final};}
\DoxyCodeLine{96 }
\DoxyCodeLine{98     \textcolor{keyword}{virtual} Tvalue \mbox{\hyperlink{class_std_texture_a5bda5ca78851e5818db1b8ef4ba6baac}{eval}}(\textcolor{keyword}{const} Tcoord \&coord) \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{99 \};}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue>}
\DoxyCodeLine{102 ConstantTexture<Tvalue>::ConstantTexture(\textcolor{keyword}{const} Tvalue \&value) : value(value)}
\DoxyCodeLine{103 \{}
\DoxyCodeLine{104 \}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue>}
\DoxyCodeLine{107 Tvalue ConstantTexture<Tvalue>::eval(\textcolor{keyword}{const} Intersection \&intersection)\textcolor{keyword}{ const}}
\DoxyCodeLine{108 \textcolor{keyword}{}\{}
\DoxyCodeLine{109     \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{110 \}}
\DoxyCodeLine{111 }
\DoxyCodeLine{112 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue>}
\DoxyCodeLine{113 MixTexture<Tvalue>::MixTexture(std::shared\_ptr<\mbox{\hyperlink{class_texture}{Texture<Tvalue>}}> srcA,}
\DoxyCodeLine{114                                std::shared\_ptr<\mbox{\hyperlink{class_texture}{Texture<Tvalue>}}> srcB,}
\DoxyCodeLine{115                                std::shared\_ptr<\mbox{\hyperlink{class_texture}{Texture<double>}}> factor) : srcA(srcA), srcB(srcB), factor(factor)}
\DoxyCodeLine{116 \{}
\DoxyCodeLine{117 \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue>}
\DoxyCodeLine{120 Tvalue MixTexture<Tvalue>::eval(\textcolor{keyword}{const} Intersection \&intersection)\textcolor{keyword}{ const}}
\DoxyCodeLine{121 \textcolor{keyword}{}\{}
\DoxyCodeLine{122     \textcolor{keywordtype}{double} alpha = factor-\/>eval(intersection);}
\DoxyCodeLine{123     \textcolor{keywordflow}{return} srcA-\/>eval(intersection) * alpha + srcB-\/>eval(intersection) * (1 -\/ alpha);}
\DoxyCodeLine{124 \}}
\DoxyCodeLine{125 }
\DoxyCodeLine{126 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue, \textcolor{keyword}{typename} Tcoord>}
\DoxyCodeLine{127 \mbox{\hyperlink{class_std_texture}{StdTexture<Tvalue, Tcoord>::StdTexture}}(std::shared\_ptr<\mbox{\hyperlink{class_texture_mapping}{TextureMapping<Tcoord>}}> mapping): mapping(mapping)}
\DoxyCodeLine{128 \{}
\DoxyCodeLine{129 \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Tvalue, \textcolor{keyword}{typename} Tcoord>}
\DoxyCodeLine{132 Tvalue \mbox{\hyperlink{class_std_texture_afe2060ef6aa48e73021144b53c0c5e08}{StdTexture<Tvalue, Tcoord>::eval}}(\textcolor{keyword}{const} Intersection \&intersection)\textcolor{keyword}{ const}}
\DoxyCodeLine{133 \textcolor{keyword}{}\{}
\DoxyCodeLine{134     \textcolor{keywordflow}{return} eval(mapping-\/>mapping(intersection));}
\DoxyCodeLine{135 \}}

\end{DoxyCode}
