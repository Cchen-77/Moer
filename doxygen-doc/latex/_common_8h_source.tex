\hypertarget{_common_8h_source}{}\doxysection{Common.\+h}
\label{_common_8h_source}\index{Common.h@{Common.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#pragma  once}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <limits>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{17 \textcolor{comment}{// some constant values}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define M\_PI         3.14159265358979323846f    }}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#define INV\_PI       0.31830988618379067154f}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define INV\_TWOPI    0.15915494309189533577f}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{double} ONEMINUSEPSILON = 1 -\/ std::numeric\_limits<double>::epsilon();}
\DoxyCodeLine{23 }
\DoxyCodeLine{25 \textcolor{keyword}{inline} \textcolor{keywordtype}{float} clamp(\textcolor{keywordtype}{float} value, \textcolor{keywordtype}{float} min, \textcolor{keywordtype}{float} max) \{}
\DoxyCodeLine{26     \textcolor{keywordflow}{if} (value < min)}
\DoxyCodeLine{27         \textcolor{keywordflow}{return} min;}
\DoxyCodeLine{28     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (value > max)}
\DoxyCodeLine{29         \textcolor{keywordflow}{return} max;}
\DoxyCodeLine{30     \textcolor{keywordflow}{else} \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{31 \}}
\DoxyCodeLine{32 }
\DoxyCodeLine{34 \textcolor{keyword}{inline} \textcolor{keywordtype}{int} clamp(\textcolor{keywordtype}{int} value, \textcolor{keywordtype}{int} min, \textcolor{keywordtype}{int} max) \{}
\DoxyCodeLine{35     \textcolor{keywordflow}{if} (value < min)}
\DoxyCodeLine{36         \textcolor{keywordflow}{return} min;}
\DoxyCodeLine{37     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (value > max)}
\DoxyCodeLine{38         \textcolor{keywordflow}{return} max;}
\DoxyCodeLine{39     \textcolor{keywordflow}{else} \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{40 \}}
\DoxyCodeLine{41 }
\DoxyCodeLine{43 \textcolor{keyword}{inline} \textcolor{keywordtype}{float} lerp(\textcolor{keywordtype}{float} t, \textcolor{keywordtype}{float} v1, \textcolor{keywordtype}{float} v2) \{}
\DoxyCodeLine{44     \textcolor{keywordflow}{return} ((\textcolor{keywordtype}{float}) 1 -\/ t) * v1 + t * v2;}
\DoxyCodeLine{45 \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{48 \textcolor{keyword}{inline} \textcolor{keywordtype}{int} mod(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b) \{}
\DoxyCodeLine{49     \textcolor{keywordtype}{int} r = a \% b;}
\DoxyCodeLine{50     \textcolor{keywordflow}{return} (r < 0) ? r+b : r;}
\DoxyCodeLine{51 \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{55 \textcolor{keyword}{inline}  \textcolor{keywordtype}{float} fresnel(\textcolor{keywordtype}{float} cosThetaI, \textcolor{keywordtype}{float} extIOR, \textcolor{keywordtype}{float} intIOR) \{}
\DoxyCodeLine{56     \textcolor{keywordtype}{float} etaI = extIOR, etaT = intIOR;}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{keywordflow}{if} (extIOR == intIOR)}
\DoxyCodeLine{59         \textcolor{keywordflow}{return} 0.0f;}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{comment}{/* Swap the indices of refraction if the interaction starts}}
\DoxyCodeLine{62 \textcolor{comment}{       at the inside of the object */}}
\DoxyCodeLine{63     \textcolor{keywordflow}{if} (cosThetaI < 0.0f) \{}
\DoxyCodeLine{64         std::swap(etaI, etaT);}
\DoxyCodeLine{65         cosThetaI = -\/cosThetaI;}
\DoxyCodeLine{66     \}}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{comment}{/* Using Snell's law, calculate the squared sine of the}}
\DoxyCodeLine{69 \textcolor{comment}{       angle between the normal and the transmitted ray */}}
\DoxyCodeLine{70     \textcolor{keywordtype}{float} eta = etaI / etaT,}
\DoxyCodeLine{71             sinThetaTSqr = eta*eta * (1-\/cosThetaI*cosThetaI);}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \textcolor{keywordflow}{if} (sinThetaTSqr > 1.0f)}
\DoxyCodeLine{74         \textcolor{keywordflow}{return} 1.0f;  \textcolor{comment}{/* Total internal reflection! */}}
\DoxyCodeLine{75 }
\DoxyCodeLine{76     \textcolor{keywordtype}{float} cosThetaT = std::sqrt(1.0f -\/ sinThetaTSqr);}
\DoxyCodeLine{77 }
\DoxyCodeLine{78     \textcolor{keywordtype}{float} Rs = (etaI * cosThetaI -\/ etaT * cosThetaT)}
\DoxyCodeLine{79                / (etaI * cosThetaI + etaT * cosThetaT);}
\DoxyCodeLine{80     \textcolor{keywordtype}{float} Rp = (etaT * cosThetaI -\/ etaI * cosThetaT)}
\DoxyCodeLine{81                / (etaT * cosThetaI + etaI * cosThetaT);}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \textcolor{keywordflow}{return} (Rs * Rs + Rp * Rp) / 2.0f;}
\DoxyCodeLine{84 \}}
\DoxyCodeLine{85 }
\DoxyCodeLine{88 \textcolor{keyword}{inline}  \textcolor{keywordtype}{double} fresnel(\textcolor{keywordtype}{double} cosThetaI, \textcolor{keywordtype}{double} extIOR, \textcolor{keywordtype}{double} intIOR) \{}
\DoxyCodeLine{89     \textcolor{keywordtype}{double} etaI = extIOR, etaT = intIOR;}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     \textcolor{keywordflow}{if} (extIOR == intIOR)}
\DoxyCodeLine{92         \textcolor{keywordflow}{return} 0.0;}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \textcolor{comment}{/* Swap the indices of refraction if the interaction starts}}
\DoxyCodeLine{95 \textcolor{comment}{       at the inside of the object */}}
\DoxyCodeLine{96     \textcolor{keywordflow}{if} (cosThetaI < 0.0f) \{}
\DoxyCodeLine{97         std::swap(etaI, etaT);}
\DoxyCodeLine{98         cosThetaI = -\/cosThetaI;}
\DoxyCodeLine{99     \}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101     \textcolor{comment}{/* Using Snell's law, calculate the squared sine of the}}
\DoxyCodeLine{102 \textcolor{comment}{       angle between the normal and the transmitted ray */}}
\DoxyCodeLine{103     \textcolor{keywordtype}{double} eta = etaI / etaT,}
\DoxyCodeLine{104             sinThetaTSqr = eta*eta * (1-\/cosThetaI*cosThetaI);}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     \textcolor{keywordflow}{if} (sinThetaTSqr > 1.0f)}
\DoxyCodeLine{107         \textcolor{keywordflow}{return} 1.0f;  \textcolor{comment}{/* Total internal reflection! */}}
\DoxyCodeLine{108 }
\DoxyCodeLine{109     \textcolor{keywordtype}{double} cosThetaT = std::sqrt(1.0f -\/ sinThetaTSqr);}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{keywordtype}{double} Rs = (etaI * cosThetaI -\/ etaT * cosThetaT)}
\DoxyCodeLine{112                / (etaI * cosThetaI + etaT * cosThetaT);}
\DoxyCodeLine{113     \textcolor{keywordtype}{double} Rp = (etaT * cosThetaI -\/ etaI * cosThetaT)}
\DoxyCodeLine{114                / (etaT * cosThetaI + etaI * cosThetaT);}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{keywordflow}{return} (Rs * Rs + Rp * Rp) / 2.0;}
\DoxyCodeLine{117 \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 }
\DoxyCodeLine{120 }
\DoxyCodeLine{121 }
\DoxyCodeLine{122 }
\DoxyCodeLine{123 }
\DoxyCodeLine{124 }

\end{DoxyCode}
