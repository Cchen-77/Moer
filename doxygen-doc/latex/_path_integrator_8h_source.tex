\hypertarget{_path_integrator_8h_source}{}\doxysection{Path\+Integrator.\+h}
\label{_path_integrator_8h_source}\index{PathIntegrator.h@{PathIntegrator.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}CoreLayer/Ray/Ray.h"{}}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}AbstractPathIntegrator.h"{}}}
\DoxyCodeLine{17 }
\DoxyCodeLine{22 \textcolor{keyword}{class }\mbox{\hyperlink{class_path_integrator}{PathIntegrator}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_abstract_path_integrator}{AbstractPathIntegrator}}}
\DoxyCodeLine{23 \{}
\DoxyCodeLine{24 \textcolor{keyword}{protected}:}
\DoxyCodeLine{25     \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_path_integrator_afb3a42328259c6fbe7325dc820fd2be9}{nPathLengthLimit}} = 20;        }
\DoxyCodeLine{26     \textcolor{keyword}{const} \textcolor{keywordtype}{double} \mbox{\hyperlink{class_path_integrator_a074f8ff5ca559d52fe73158d73dc9c0c}{pRussianRoulette}} = 0.95;   }
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{keyword}{public}:}
\DoxyCodeLine{29     \mbox{\hyperlink{class_path_integrator}{PathIntegrator}}(}
\DoxyCodeLine{30         std::shared\_ptr<Camera> \_camera, }
\DoxyCodeLine{31         std::unique\_ptr<Film> \_film, }
\DoxyCodeLine{32         std::unique\_ptr<TileGenerator> \_tileGenerator, }
\DoxyCodeLine{33         std::shared\_ptr<Sampler> \_sampler, }
\DoxyCodeLine{34         \textcolor{keywordtype}{int} \_spp,}
\DoxyCodeLine{35         \textcolor{keywordtype}{int} \_renderThreadNum=4);}
\DoxyCodeLine{36 }
\DoxyCodeLine{42     \textcolor{keyword}{virtual} \mbox{\hyperlink{struct_path_integrator_local_record}{PathIntegratorLocalRecord}} \mbox{\hyperlink{class_path_integrator_aed2feeee5709bc0ba5bf4198486f0392}{evalEmittance}}(std::shared\_ptr<Scene> scene,}
\DoxyCodeLine{43                                                     std::optional<Intersection> its,}
\DoxyCodeLine{44                                                     \textcolor{keyword}{const} \mbox{\hyperlink{struct_ray}{Ray}} \&ray) \textcolor{keyword}{override};}
\DoxyCodeLine{45 }
\DoxyCodeLine{51     \textcolor{keyword}{virtual} \mbox{\hyperlink{struct_path_integrator_local_record}{PathIntegratorLocalRecord}} \mbox{\hyperlink{class_path_integrator_ac42f7dd6e356f7f674c61dddca928b17}{sampleDirectLighting}}(std::shared\_ptr<Scene> scene,}
\DoxyCodeLine{52                                                            \textcolor{keyword}{const} Intersection \&its,}
\DoxyCodeLine{53                                                            \textcolor{keyword}{const} \mbox{\hyperlink{struct_ray}{Ray}} \&ray) \textcolor{keyword}{override};}
\DoxyCodeLine{54 }
\DoxyCodeLine{63     \textcolor{keyword}{virtual} \mbox{\hyperlink{struct_path_integrator_local_record}{PathIntegratorLocalRecord}} \mbox{\hyperlink{class_path_integrator_a96034877fb87f552e7b0061f2c184781}{evalScatter}}(std::shared\_ptr<Scene> scene,}
\DoxyCodeLine{64                                                   \textcolor{keyword}{const} Intersection \&its,}
\DoxyCodeLine{65                                                   \textcolor{keyword}{const} \mbox{\hyperlink{struct_ray}{Ray}} \&ray,}
\DoxyCodeLine{66                                                   \textcolor{keyword}{const} \mbox{\hyperlink{struct_t_vector3}{Vec3d}} \&wi) \textcolor{keyword}{override};}
\DoxyCodeLine{67 }
\DoxyCodeLine{75     \textcolor{keyword}{virtual} \mbox{\hyperlink{struct_path_integrator_local_record}{PathIntegratorLocalRecord}} \mbox{\hyperlink{class_path_integrator_a70b02a3b0c88a62a49ab6947aedcf2ec}{sampleScatter}}(std::shared\_ptr<Scene> scene,}
\DoxyCodeLine{76                                                     \textcolor{keyword}{const} Intersection \&its,}
\DoxyCodeLine{77                                                     \textcolor{keyword}{const} \mbox{\hyperlink{struct_ray}{Ray}} \&ray);}
\DoxyCodeLine{78 }
\DoxyCodeLine{80     \textcolor{keyword}{virtual} \textcolor{keywordtype}{double} \mbox{\hyperlink{class_path_integrator_aab8f02d77ad68804cc73f26414e69116}{russianRoulette}}(std::shared\_ptr<Scene> scene,}
\DoxyCodeLine{81                                    \textcolor{keyword}{const} Intersection \&its,}
\DoxyCodeLine{82                                    \textcolor{keyword}{const} \mbox{\hyperlink{class_sampled_spectrum}{Spectrum}} \&T,}
\DoxyCodeLine{83                                    \textcolor{keywordtype}{int} nBounce) \textcolor{keyword}{override};}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{comment}{// todo: move light sampling into a new class (called LightDistribution?)}}
\DoxyCodeLine{88 \textcolor{comment}{}    \textcolor{keyword}{virtual} std::pair<std::shared\_ptr<Light>, \textcolor{keywordtype}{double}> \mbox{\hyperlink{class_path_integrator_ab4d7071e1c8e56d42a51a64f624bcaf6}{chooseOneLight}}(std::shared\_ptr<Scene> scene,}
\DoxyCodeLine{89                                                                      \textcolor{keyword}{const} Intersection \&its,}
\DoxyCodeLine{90                                                                      \textcolor{keyword}{const} \mbox{\hyperlink{struct_ray}{Ray}} \&ray,}
\DoxyCodeLine{91                                                                      \textcolor{keywordtype}{double} lightSample);}
\DoxyCodeLine{92 }
\DoxyCodeLine{94     \textcolor{keyword}{virtual} \textcolor{keywordtype}{double} \mbox{\hyperlink{class_path_integrator_ab4ad474097b5d20a7c9e27eec38d50ea}{chooseOneLightPdf}}(std::shared\_ptr<Scene> scene,}
\DoxyCodeLine{95                                      \textcolor{keyword}{const} Intersection \&its,}
\DoxyCodeLine{96                                      \textcolor{keyword}{const} \mbox{\hyperlink{struct_ray}{Ray}} \&ray,}
\DoxyCodeLine{97                                      std::shared\_ptr<Light> light);}
\DoxyCodeLine{98 }
\DoxyCodeLine{100     \textcolor{keyword}{virtual} \mbox{\hyperlink{struct_path_integrator_local_record}{PathIntegratorLocalRecord}} \mbox{\hyperlink{class_path_integrator_a90dad5b76dec090103b6d34ee0cf2e69}{evalEnvLights}}(std::shared\_ptr<Scene> scene,}
\DoxyCodeLine{101                                                     \textcolor{keyword}{const} \mbox{\hyperlink{struct_ray}{Ray}} \&ray);}
\DoxyCodeLine{102 \};}

\end{DoxyCode}
